<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Excellent Studies ZA | Book & Pay</title>

<style>
body{
  background:#fff;
  font-family:Arial, sans-serif;
  padding:20px;
}
.container{
  max-width:750px;
  background:black;
  color:white;
  margin:auto;
  padding:30px;
  border-radius:12px;
}
h1{text-align:center;}
label{display:block;font-weight:bold;margin-top:10px;}
input,select,textarea{
  width:100%;
  padding:8px;
  margin:6px 0 10px;
  border-radius:6px;
  border:none;
}
button{
  width:100%;
  background:white;
  color:black;
  padding:12px;
  border:none;
  border-radius:8px;
  font-weight:bold;
}

.nav{text-align:center;margin:10px 0;}
.nav a{
  color:white;
  border:1px solid white;
  padding:6px 12px;
  text-decoration:none;
  border-radius:6px;
  margin:0 4px;
}
</style>
</head>

<body>

<div class="container">

<h1>ðŸ“š Excellent Studies ZA</h1>

<div class="nav">
  <a href="prices.html">Prices</a>
  <a href="about.html">About</a>
  <a href="contact.html">Contact</a>
  <a href="dashboard.html">Admin Dashboard</a>
</div>

<form id="bookingForm" action="https://www.payfast.co.za/eng/process" method="post" onsubmit="saveBooking()">

<!-- PayFast Credentials -->
<input type="hidden" name="merchant_id" value="MERCHANT_ID">
<input type="hidden" name="merchant_key" value="MERCHANT_KEY">
<input type="hidden" name="passphrase" value="YOUR_PASSPHRASE">

<!-- Payment Settings -->
<input type="hidden" name="currency" value="ZAR">
<input type="hidden" name="amount" id="amount" value="110">
<input type="hidden" name="item_name" id="item_name" value="Tutoring Session">

<label>Student Name</label>
<input type="text" name="name_first" id="name" required>

<label>Email</label>
<input type="email" name="email_address" id="email" required>

<label>Select Subject</label>
<select id="subject" name="subject" required>
  <option value="Mathematics">Mathematics</option>
  <option value="Mathematical Literacy">Mathematical Literacy</option>
  <option value="Accounting">Accounting</option>
  <option value="Business Studies">Business Studies</option>
  <option value="Physical Science">Physical Science</option>
  <option value="Geography">Geography</option>
  <option value="Life Science">Life Science</option>
</select>

<label>Select Package</label>
<select id="package" required onchange="setPrice()">
  <option value="110">Single Session â€“ R110</option>
  <option value="210">2 Hour Session â€“ R210</option>
  <option value="430">Monthly Package â€“ R430</option>
  <option value="2016">Group Monthly Package â€“ R2016 (40% OFF Group Discount)</option>
  <option value="210">University Applications â€“ R210</option>
</select>

<label>Session Date</label>
<input type="date" name="custom_date" id="date" required>

<label>Time</label>
<input type="time" name="custom_time" id="time" required>

<label>Notes (hours + grade)</label>
<textarea name="notes" id="notes" placeholder="Example: 2 hours, Grade 11"></textarea>

<button type="submit">ðŸ’³ BOOK & PAY SECURELY</button>
</form>

</div>

<script>
// Set price for PayFast
function setPrice(){
  const pkg=document.getElementById("package");
  const price=pkg.value;
  document.getElementById("amount").value=price;
  document.getElementById("item_name").value=
   "Excellent Studies ZA â€“ "+pkg.options[pkg.selectedIndex].text;
}
setPrice();

// Save booking to Google Sheet before submitting
function saveBooking(){
  const name = document.getElementById("name").value;
  const email = document.getElementById("email").value;
  const subject = document.getElementById("subject").value;
  const date = document.getElementById("date").value;
  const time = document.getElementById("time").value;
  const notes = document.getElementById("notes").value;

  const scriptURL = "https://script.google.com/macros/s/AKfycbys08KAuNNsU6kY7n0CjyiHQ-5l02ocqvlOTTePCp-ces9wWYghPUbn6UO_d9u3CmZY/exec";

  fetch(scriptURL, {
    method: 'POST',
    body: JSON.stringify({name, email, subject, date, time, notes}),
    headers: { 'Content-Type': 'application/json' }
  })
  .then(response => console.log("Booking saved to Google Sheet"))
  .catch(error => console.error("Error saving booking:", error));
}
</script>

</body>
</html>
